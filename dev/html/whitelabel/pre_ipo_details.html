<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no, email=no"/>
    <!-- 启用360浏览器的极速模式(webkit) -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="hotcss" content="initial-dpr=1">
    <title>股权投资</title>
    <link href="http://zion.meixincn.com/vendor/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://zion.meixincn.com/version/dist/css/pre_ipo_details.min.css" rel="stylesheet">
    <style>
        @media (min-width: 315px) and (max-width: 460px){


        }
    </style>
</head>
<body>
<div id="funds" style="">
    <div class="fund_base_info">
        <div class="fund_logo">
            <img class="logo_img" src="" alt="logo">
        </div>
        <p class="fund_title"></p>
        <div class="fund_info">
            <p>总融资额: <span class="total_funding"></span></p>
            <p>最新估值: <span class="most_recent_valuation"></span></p>
        </div>
    </div>
    <div class="investment_highlights">
        <p>投资亮点</p>
        <ul class="investment_highlights_info_list">
            <li class="">
                <span class="dot"></span>
                <span class="investment_highlights_info"></span>
            </li>
        </ul>
    </div>
    <div class="funding_history">
        <p>融资历史</p>
        <table class="funding_history_table">
            <thead>
            <tr>
                <th style="width: 8%; border: none"></th>
                <th style="width: 18%">日期</th>
                <th style="width: 15%">轮次</th>
                <th style="width: 20%">金额</th>
                <th style="width: 25%">领投者</th>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
    <div class="investor_descriptions">
        <p>领投者介绍</p>
        <div class="investor_wrapper">
            <div class="investor_list">
                <div class="investor_logo">
                    <img src="" alt="">
                </div>
                <div class="investor_text">
                    <p class="investor_name"></p>
                    <div class="investor_describe"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="founder_descriptions">
        <p>创始人介绍</p>
        <div class="founder_wrapper">
            <div class="row founder_list">
                <div class="col-sm-4 founder_logo">
                    <img src="" alt="">
                </div>
                <div class="col-sm-8 founder_text">
                    <p class="founder_name"></p>
                    <div class="founder_describe"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="appointment">
        <button id="consult" data-toggle="modal" data-target="#con">立即咨询</button>
        <button id="appoint" data-toggle="modal"  data-target="#popup">立即预约</button>
    </div>
</div>
<div class="modal fade" id="popup" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">X</span>
                </button>
                <h4 class="modal-title text-center" id="exampleModalLabel">申购预约</h4>
            </div>
            <div class="modal-body">
                <form class="appointment" data-parsley-validate>
                    <div class="form-group">
                        <input class="form-control" id="id_user_contact_name" maxlength="128" name="user_contact_name"
                               placeholder="姓名" required="required" type="text" data-parsley-pattern-message="请输入姓名！">
                    </div>
                    <div class="form-group" id="phone">
                        <select class="input-medium bfh-countries form-control" data-country="CN"
                                id="countries_phone" required="">
                            <option value="+86 ">+86 </option>
                        </select>
                        <input class="form-control bfh-phone" data-country="countries_phone"
                                        id="recipient-phone" maxlength="64" name="phone"
                                        data-parsley-pattern="/[\s\S]{9,}/"
                                        placeholder="请填写您的手机号" required="required" data-parsley-pattern-message="请填写您的手机号！"
                                        type="text">
                    </div>
                    <div class="form-group">
                        <input class="form-control" id="id_email" min="0" name="interested_amount"
                               placeholder="请填写您的邮箱" required="required" type="text"
                               data-parsley-pattern-message="请填写您的邮箱！">
                    </div>
                    <div class="form-group">
                        <input class="form-control" id="id_city" maxlength="255" name="city"
                               placeholder="所在城市（会根据您所在的城市联系您）" required="required"
                               data-parsley-pattern-message="请输入所在城市！" type="text">
                    </div>
                    <p class="appoint_err">预约失败,请刷新后尝试</p>
                    <button type="submit" class="btn btn-primary" id="book_submit" style="width: 100%">立即提交</button>
                </form>
            </div>
            <div class="modal-body-success text-center" style="padding: 10px;">
                <p>
                    美信金融的专业理财顾问将尽快与您取得联系,请保持您的通讯畅通。
                </p>
                <a href="javascript:;" type="button" id="check" class="btn btn-primary">查看其他产品</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="con" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">X</span>
                </div>
                <h4 class="modal-title text-center" id="con-title">申购预约</h4>
            </div>
            <div class="con-modal-body">
                <div class="text-center">
                    <img src="http://zion.meixincn.com/version/dist/img/funds/appointment/phone.png" alt="">
                    <p>美信金融客服电话</p>
                    <p>400-094-1580</p>
                </div>
                <div class="text-center">
                    <img src="http://zion.meixincn.com/version/dist/img/funds/appointment/email.png" alt="">
                    <p>美信金融客服邮箱</p>
                    <p>contact@meixinfinance.com</p>
                </div>
            </div>
        </div>
    </div></div>
</body>
<script src="http://zion.meixincn.com/vendor/js/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="http://zion.meixincn.com/vendor/js/jquery.cookie.min.js" type="text/javascript"></script>
<!--<script src="http://zion.meixincn.com/vendor/js/parsley.min.js" type="text/javascript"></script>-->
<script type="text/javascript" src="http://zion.meixincn.com/vendor/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://zion.meixincn.com/version/dist/js/main.min.js"></script>
<script type="text/javascript">
    //获取url中的参数
    function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var s = window.location.search;
        if (/[\u4e00-\u9fa5]/.test(s)) {
            s = decodeURI(s);
        }
        var r = s.substr(1).match(reg);  //匹配目标参数
        if (r != null) return unescape(r[2]);
        return null; //返回参数值
    }
</script>
<script type="text/javascript">
    $(function () {
        var name = '';
        var product_id = getUrlParam('product_id') || ''; // 获取通行证
        var phone = getUrlParam('phone') || '';
        var app_id = getUrlParam('app_id') || '';
        $.getJSON("http://zion.meixincn.com/version/dist/js/whiteLabel.json",function(d){
            $.each(d,function(arr,info){
                if(product_id==info["id"]){
                    name = info["name"];
                    $(".logo_img").attr('src',info["logo"]);
                    $(".fund_title").html(info["name"]);
                    $(".total_funding").html(info["total_funding"]);
                    $(".most_recent_valuation").html(info["most_recent_valuation"]);
                }else{
                    alert('产品ID错误');
                }
            });
        });
        $.getJSON("http://zion.meixincn.com/version/dist/js/whiteLabelDetail.json",function(d){
            $.each(d,function(arr,info){
                if(product_id==info["id"]){
                    var investment_highlights = '';
                    $.each(info["investment_highlights"],function (i) {
                        investment_highlights += '<li class="">'+
                            '<span class="dot"></span>'+
                            '<span class="investment_highlights_info">' + info["investment_highlights"][i] + '</span>'+
                            '</li> '
                    });
                    $(".investment_highlights_info_list").empty().append(investment_highlights);
                    var funding_history = '';
                    $.each(info["funding_history"],function (i) {
                        funding_history += '<tr class="">'+
                            '<td style="border: none; color: #a1d976">●</td>'+
                            '<td class="investment_highlights_info">' + info["funding_history"][i]["date"] + '</td>'+
                            '<td class="investment_highlights_info">' + info["funding_history"][i]["round"] + '</td>'+
                            '<td class="investment_highlights_info">' + info["funding_history"][i]["amount"] + '</td>'+
                            '<td class="investment_highlights_info">' + info["funding_history"][i]["lead_investor"] + '</td>'+
                            '</tr> '
                    });
                    $(".funding_history_table tbody").empty().append(funding_history);
                    var investor_descriptions = '';
                    $.each(info["investor_descriptions"],function (i) {
                        investor_descriptions += ' <div class="investor_list">'+
                            '<div style="display: table-row">'+
                            '<div class="investor_logo">'+
                            '<img src="'+ info["investor_descriptions"][i]["logo"]+ '" alt="">'+
                            '</div>'+
                            '<div class="investor_text">'+
                            '<p class="investor_name">'+ info["investor_descriptions"][i]["name"]+ '</p>'+
                            '<div class="investor_describe">'+ info["investor_descriptions"][i]["description"]+ '</div>'+
                            '</div>'+
                            '</div>'+
                            '</div>';
                    });
                    $(".investor_wrapper").empty().append(investor_descriptions);
                    var founder_descriptions = '';
                    $.each(info["founder_descriptions"],function (i) {
                        founder_descriptions += ' <div class="founder_list">'+
                            '<div style="display: table-row">'+
                            '<div class="founder_logo">'+
                            '<img src="'+ info["founder_descriptions"][i]["picture"]+ '" alt="">'+
                            '</div>'+
                            '<div class="founder_text">'+
                            '<p class="founder_name">'+ info["founder_descriptions"][i]["name"]+ '</p>'+
                            '<div class="founder_describe">'+ info["founder_descriptions"][i]["description"]+ '</div>'+
                            '</div>'+
                            '</div>'+
                            '</div>';
                    });
                    $(".founder_wrapper").empty().append(founder_descriptions);
                }else{
                    alert("产品ID错误")
                }
            });
        });

        $('input').on('focus',function () {
            $(this).removeClass('red-border');
        });

        $(".modal-body-success").hide();

        $("#book_submit").on('click',function () {
            $(".form-group ul").show();
            var name =  $("#id_user_contact_name").val();
            var re_phone =  $("#recipient-phone").val();
            var email =  $("#id_email").val();
            var city =  $("#id_city").val();
            if(name==''){
                $("#id_user_contact_name").addClass('red-border');
                return false;
            }if(re_phone==''){
                $("#recipient-phone").addClass('red-border');
                return false;
            }if(email==''){
                $("#id_email").addClass('red-border');
                return false;
            }if(city==''){
                $("#id_city").addClass('red-border');
                return false;
            }else{
                if(re_phone.indexOf('+')==0){

                }else {
                    re_phone = re_phone + '+86 '
                }
                var data = {'user_contact_name':name,'phone':re_phone,'email':email,'city':city,
                    'app_id':app_id,'product_id':product_id};
                var p_data = JSON.stringify(data);
                $.ajax({
                    type: 'post',
                    dataType: 'json',
                    contentType: 'application/json',
                    data: p_data,
                    url: base_url + '/product/appointment',
                    success: function (res) {
                        if(res.code=='success'){
                            $(".modal-body-success").show();
                            $(".modal-body").hide();
                        }else{
                            $(".appoint_err").show();
                        }
                    }
                });
            }

        });
    })
</script>
<script type="text/javascript">

</script>
</html>