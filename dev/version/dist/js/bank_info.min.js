$(function(){function n(){var n={type:"1"};getData({data:n,url:base_url+"/white_label/invest/access_bank_dic",async:!1,sucFn:a,failFn:i})}function a(n){var a=n.body;if(a&&null!=a){f=a;var e="";$.each(a,function(n,a){e+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height:60px;"><img class="bank-icon" style="margin-top: 10px;"src="'+a.bank_url+'"alt=""></div><div style="float: right; width: 70%; height:60px;"><p style="text-align: left;">'+a.bank_name_cn+'</p><p style="text-align: left;">'+a.bank_name_en+"</p></div></div></div></a>"}),e+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height:60px;"><img class="bank-icon" style="margin-top: 10px; width: 38px"src="http://localhost:8080/version/dist/img/other_bank.png"alt=""></div><div style="float: right; width: 70%; height:60px;"><p style="text-align: left; font-size: 18px; line-height: 60px; color: #159bd6;">其他银行</p></div></div></div></a>',$(".bank-list").html(e)}}function e(){var n={type:"2"};getData({data:n,url:base_url+"/white_label/invest/access_bank_dic",async:!1,sucFn:s,failFn:i})}function s(n){var a=n.body;if(a&&null!=a){p=a;var e="";$.each(a,function(n,a){e+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height:60px;"><img class="bank-icon" style="margin-top: 10px;"src="'+a.bank_url+'"alt=""></div><div style="float: right; width: 70%; height:60px;"><p style="text-align: left;">'+a.bank_name_en+"</p></div></div></div></a>"}),e+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height:60px;"><img class="bank-icon" style="margin-top: 10px; width: 38px"src="http://localhost:8080/version/dist/img/other_bank.png"alt=""></div><div style="float: right; width: 70%; height:60px;"><p style="text-align: left; font-size: 18px; line-height: 60px; color: #159bd6;">其他银行</p></div></div></div></a>',$(".bank-list").html(e)}}function t(n){var a=n.body;null!=a&&""!=a&&(k=a,""!=k.bank_type&&null!=k.bank_type||(k.bank_type="NON_US"),"US"==a.bank_type)}function o(n){n&&(n.bank_url&&$(".bank-us .bank_url img").attr("src",n.bank_url),n.bank_name_en&&$(".bank-us .bank_name_en").html(n.bank_name_en),n.bank_swift_code&&$(".bank-us .swift_code").html("SWIFT："+n.bank_swift_code),n.routing_number&&$(".bank-us .routing_number").val(n.routing_number),n.account_number&&$(".bank-us .account_number").val(n.account_number),"Savings"==n.account_type?$(".bank-us .account_type .savings").addClass("checked").siblings(".checking").removeClass("checked"):$(".bank-us .account_type .checking").addClass("checked").siblings(".savings").removeClass("checked")),$(".bank-us").show().siblings(".bank-us-other,.bank-cn,.bank-cn-other,.middle-bank").hide()}function r(n){n&&(""!=n.bank_url&&null!=n.bank_url&&void 0!=n.bank_url&&$(".bank-cn .bank_url img").attr("src",n.bank_url),n.bank_name_cn&&$(".bank-cn .bank_name_cn").html(n.bank_name_cn),n.bank_name_en&&$(".bank-cn .bank_name_en").html(n.bank_name_en),n.swift_code&&$(".bank-cn .swift_code").html("SWIFT："+n.swift_code),n.account_number&&$(".bank-cn .account_number").val(n.account_number),n.bank_name&&$(".bank-cn .bank_name_en").html(n.bank_name)),$(".bank-cn").show().siblings(".bank-us-other,.bank-us,.bank-cn-other,.middle-bank").hide()}function b(n){n&&(n.bank_name&&$(".bank-us-other .bank_name").val(n.bank_name),n.bank_address&&$(".bank-us-other .bank_address").val(n.bank_address),n.swift_code&&$(".bank-us-other .swift_code").val(n.swift_code),n.routing_number&&$(".bank-us-other .routing_number").val(n.routing_number),n.account_number&&$(".bank-us-other .account_number").val(n.account_number),"Savings"==n.account_type?$(".bank-us-other .account_type .savings").addClass("checked").siblings(".checking").removeClass("checked"):$(".bank-us-other .account_type .checking").addClass("checked").siblings(".savings").removeClass("checked")),$(".bank-us-other").show().siblings(".bank-cn,.bank-us,.bank-cn-other,.middle-bank").hide()}function d(n){n&&(n.bank_name&&$(".bank-cn-other .bank_name").val(n.bank_name),n.bank_address&&$(".bank-cn-other .bank_address").val(n.bank_address),n.swift_code&&$(".bank-cn-other .swift_code").val(n.swift_code),n.account_number&&$(".bank-cn-other .account_number").val(n.account_number),n.have_middle_bank&&($(".bank-cn-other .middle_bank_name").val(n.middle_bank_name),$(".bank-cn-other .middle_bank_address").val(n.middle_bank_address),$(".bank-cn-other .middle_bank_swift_code").val(n.middle_bank_swift_code))),$(".bank-cn-other,.middle-bank").show().siblings(".bank-us-other,.bank-us,.bank-cn").hide()}function c(n){postData({url:base_url+"/white_label/invest/operate_user",data:JSON.stringify(n),async:!1,sucFn:l,failFn:i})}function l(n){console.log(n.msg),window.location="/white_label/signature.html?product_id="+h+"&phone="+u+"&partner_id="+_+"&voucher="+v+"&order_number="+n.body.order_number}function i(n){alert(n.msg)}var k={},u=getUrlParam("phone")||"",_=getUrlParam("partner_id")||"",h=getUrlParam("product_id")||"",m=getUrlParam("order_number")||"",v=getUrlParam("voucher")||"",p="",f="";n(),""!=u&&""!=v&&getData({url:base_url+"/zion/white_label/user_info",data:{phone:u,voucher:v,channel_code:_},async:!1,sucFn:t,failFn:i}),$(".step-three").on("click",function(){if($(".error").remove(),$(this).prop("disabled",!0),"block"==$(".banks").css("display"))return $(".banks").append('<div class="error">请选择银行</div>'),!1;if("block"==$(".bank-us").css("display")){var n=!0;$(".bank-us .routing_number,.bank-us .account_number").css("border-color","#ccc").removeClass("red-shadow");var a=$(".bank-us .routing_number").val(),e=$(".bank-us .account_number").val(),s=$(".bank-us .account_type .checked").html();if(""==a&&($(".bank-us .routing_number").css("border-color","red").addClass("red-shadow"),n=!1),""==e&&($(".bank-us .account_number").css("border-color","red").addClass("red-shadow"),n=!1),n)k.bank_us.routing_number=a,k.bank_us.account_number=e,k.bank_us.bank_type=s,c(k);else{var t=$(".red-shadow").eq(0).offset().top;$("body").scrollTop(t),$(this).prop("disabled",!1)}return!1}if("block"==$(".bank-us-other").css("display")){var n=!0;$(".bank-us-other .bank_name,.bank-us-other .bank_address,.bank-us-other .swift_code,.bank-us-other .routing_number,.bank-us-other .account_number").css("border-color","#ccc").removeClass("red-shadow");var o=$(".bank-us-other .bank_name").val(),r=$(".bank-us-other .bank_address").val(),b=$(".bank-us-other .swift_code").val(),a=$(".bank-us-other .routing_number").val(),e=$(".bank-us-other .account_number").val(),s=$(".bank-us-other .account_type .checked").html();if(""==o&&($(".bank-us-other .bank_name").css("border-color","red").addClass("red-shadow"),n=!1),""==r&&($(".bank-us-other .bank_address").css("border-color","red").addClass("red-shadow"),n=!1),""==b&&""==a&&($(".bank-us-other .swift_code").css("border-color","red").addClass("red-shadow"),$(".bank-us-other .routing_number").css("border-color","red").addClass("red-shadow"),n=!1),""==e&&($(".bank-us-other .account_number").css("border-color","red").addClass("red-shadow"),n=!1),n)k.bank_us.bank_name=o,k.bank_us.bank_address=r,k.bank_us.routing_number=a,k.bank_us.swift_code=b,k.bank_us.account_number=e,k.bank_us.bank_type=s,c(k);else{var t=$(".red-shadow").eq(0).offset().top;$("body").scrollTop(t),$(this).prop("disabled",!1)}return!1}if("block"==$(".bank-cn").css("display")){var n=!0;$(".bank-cn .account_number").css("border-color","#ccc").removeClass("red-shadow");var e=$(".bank-cn .bank_name").val();if(""==e&&($(".bank-us-other .account_number").css("border-color","red").addClass("red-shadow"),n=!1),n)k.bank_us.account_number=e,c(k);else{var t=$(".red-shadow").eq(0).offset().top;$("body").scrollTop(t),$(this).prop("disabled",!1)}return!1}if("block"==$(".bank-cn-other").css("display")){var n=!0;$(".bank-cn-other .bank_name,.bank-cn-other .bank_address,.bank-cn-other .swift_code,.bank-cn-other .account_number").css("border-color","#ccc").removeClass("red-shadow");var o=$(".bank-cn-other .bank_name").val(),r=$(".bank-cn-other .bank_address").val(),b=$(".bank-cn-other .swift_code").val(),e=$(".bank-cn-other .account_number").val();$(".bank-cn-other .middle_bank_name").val(),$(".bank-cn-other .middle_bank_address").val(),$(".bank-cn-other .middle_bank_swift_code").val();if(""==o&&($(".bank-cn-other .bank_name").css("border-color","red").addClass("red-shadow"),n=!1),""==r&&($(".bank-cn-other .bank_address").css("border-color","red").addClass("red-shadow"),n=!1),""==b&&($(".bank-cn-other .swift_code").css("border-color","red").addClass("red-shadow"),n=!1),""==e&&($(".bank-cn-other .account_number").css("border-color","red").addClass("red-shadow"),n=!1),n)k.bank_us.account_number=e,c(k);else{var t=$(".red-shadow").eq(0).offset().top;$("body").scrollTop(t),$(this).prop("disabled",!1)}return!1}}),$(".prev-two").click(function(){window.location="/white_label/address_info.html?product_id="+h+"&phone="+u+"&partner_id="+_+"&order_number="+m+"&voucher="+v}),$(".banks").on("click",".button-white",function(){return $(this).addClass("button-blue").removeClass("button-white"),$(this).hasClass("non-us-bank")&&($(".us-bank").addClass("button-white").removeClass("button-blue"),k.bank_type="NON_US",n()),$(this).hasClass("us-bank")&&($(".non-us-bank").addClass("button-white").removeClass("button-blue"),k.bank_type="US",e()),!1}),$(".bank-list").on("click",".choose-bank",function(){$(".step-three").prop("disabled",!1),$(".banks").hide();var n=$(".bank-list a").length,a=$(this).closest("a").index();if(a<n-1){var e;if("US"==k.bank_type)return e=p[a],k.bank_us.bank_name=e.bank_name_en,k.bank_us.bank_address=e.bank_address,k.bank_us.swift_code=e.bank_swift_code,k.bank_us.routing_number=e.routing_number,o(e),!1;if("NON_US"==k.bank_type)return e=f[a],k.bank_non_us.bank_name=e.bank_name_en,k.bank_non_us.bank_address=e.bank_address,k.bank_non_us.swift_code=e.bank_swift_code,k.bank_non_us.middle_bank_name=e.middle_bank_name,k.bank_non_us.middle_bank_address=e.middle_bank_address,k.bank_non_us.middle_bank_swift_code=e.middle_bank_swift_code,r(e),!1}else{if("US"==k.bank_type)return b(),!1;if("NON_US"==k.bank_type)return d(),!1}return!1}),$(".search_bank, .bank_home").on("click",function(){return $(".step-three").prop("disabled",!1),$(".error").remove(),"US"==k.bank_type?(e(),$(".us-bank").addClass("button-blue").removeClass("button-white"),$(".non-us-bank").addClass("button-white").removeClass("button-blue"),$(".banks").show().siblings(".bank-us,.bank-us-other,.bank-cn,.bank-cn-other,.middle-bank").hide(),!1):"NON_US"==k.bank_type?(n(),$(".us-bank").addClass("button-white").removeClass("button-blue"),$(".non-us-bank").addClass("button-blue").removeClass("button-white"),$(".banks").show().siblings(".bank-us,.bank-us-other,.bank-cn,.bank-cn-other,.middle-bank").hide(),!1):void 0}),$("input,textarea").focus(function(){$(this).css("border-color","#ccc")})});