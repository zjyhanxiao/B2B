function getUrlParam(n){var e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(e);return null!=t?unescape(t[2]):null}var base_url="http://192.168.1.102:8001",postData=function(n){$.ajax({type:"post",url:n.url,data:n.data,headers:n.headers,timeout:15e3,async:!1,contentType:n.contentType,success:function(e){1==e.code&&n.sucFn&&n.sucFn(e),0==e.code&&n.failFn&&n.failFn(e),2==e.code&&n.resetPas&&n.resetPas(e),e.code==-1&&"auth failed"==e.msg&&(window.location="/login.html")}})},getData=function(n){$.ajax({type:"get",url:n.url,data:n.data,headers:n.headers,timeout:15e3,async:n.async,contentType:n.contentType,success:function(e){1==e.code&&n.sucFn&&n.sucFn(e),0==e.code&&n.failFn&&n.failFn(e),2==e.code&&n.resetPas&&n.resetPas(e),e.code==-1&&"auth failed"==e.msg&&(window.location="/login.html")}})};$(function(){function n(){window.location="/login.html"}function e(){$.cookie("mx_token",null),$.cookie("mx_secret",null),$.cookie("is_admin",null)}"/login.html"!==window.location.pathname&&"/firstLogin_reset.html"!==window.location.pathname&&"/find_password.html"!==window.location.pathname&&"/find_password_by_phone.html"!==window.location.pathname&&getData({url:base_url+"/zion/channel_advisor/authentication",data:{mx_secret:$.cookie("mx_secret")||"",mx_token:$.cookie("mx_token")||""},failFn:n}),$("#logout").on("click",function(){getData({url:base_url+"/zion/channel_advisor/logout",data:{mx_secret:$.cookie("mx_secret"),mx_token:$.cookie("mx_token")},sucFn:e})})});