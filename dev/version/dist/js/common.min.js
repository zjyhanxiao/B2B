function getUrlParam(n){var t=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),a=window.location.search;/[\u4e00-\u9fa5]/.test(a)&&(a=decodeURI(a));var e=a.substr(1).match(t);return null!=e?unescape(e[2]):null}function alertMsg(n,t){var a=this;t=t||2;var e=$("#times-tip-wraps");if(e&&e.length>0)e.html("<span>"+n+"</span>"),e.show();else{var e=$('<div id="times-tip-wraps" class="tips" ><span>'+n+"</span></div>");$("body").append(e)}this.tipTs&&clearTimeout(this.tipTs),this.tipTs=setTimeout(function(){e.hide()},1e3*t),e.unbind(),e.bind("click",function(){return clearTimeout(a.tipTs),$(this).hide(),!1})}var base_url="http://192.168.1.102:8001",is_admin,postData=function(n){$.ajax({type:"post",url:n.url,data:n.data,headers:n.headers,timeout:15e3,async:!1,contentType:n.contentType,success:function(t){1==t.code&&n.sucFn&&n.sucFn(t),0==t.code&&n.failFn&&n.failFn(t),2==t.code&&n.resetPas&&n.resetPas(t),t.code==-1&&"auth failed"==t.msg&&(window.location="/login.html")}})},getData=function(n){$.ajax({type:"get",url:n.url,data:n.data,headers:n.headers,timeout:15e3,async:n.async,contentType:n.contentType,success:function(t){1==t.code&&n.sucFn&&n.sucFn(t),0==t.code&&n.failFn&&n.failFn(t),2==t.code&&n.resetPas&&n.resetPas(t),t.code==-1&&"auth failed"==t.msg&&(window.location="/login.html")}})};$(function(){function n(n){is_admin=n.body}function t(){window.location="/login.html"}function a(){$.cookie("mx_token",null),$.cookie("mx_secret",null),window.location="/login.html"}var e=$.cookie("mx_secret")||"",i=$.cookie("mx_token")||"";"/login.html"!==window.location.pathname&&"/firstLogin_reset.html"!==window.location.pathname&&"/find_password.html"!==window.location.pathname&&"/find_password_by_phone.html"!==window.location.pathname&&"/find_password_step_one.html"!==window.location.pathname&&"/find_password_step_two.html"!==window.location.pathname&&"/auxiliary_order/invest_success.html"!==window.location.pathname&&"/auxiliary_order/shareAndSignature.html"!==window.location.pathname&&getData({url:base_url+"/zion/channel_advisor/authentication",data:{mx_secret:e,mx_token:i},async:!1,sucFn:n,failFn:t}),is_admin&&$(".backstage").css("visibility","inherit"),$("#logout").on("click",function(){getData({url:base_url+"/zion/channel_advisor/logout",data:{mx_secret:e,mx_token:i},sucFn:a})})});