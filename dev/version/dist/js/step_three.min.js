$(function(){function a(a){var n=a.body;n&&null!=n&&(e=n,"US"==n.bank_type?($(".non-us-bank").addClass("button-white").removeClass("button-blue"),$(".us-bank").addClass("button-blue").removeClass("button-white"),$(".middle-bank").hide(),$(".checking-saving").show(),$("#routing-number-wrapper").show(),n.bank_us&&($("#bank-name").val(n.bank_us.bank_name),$("#bank-address").val(n.bank_us.bank_address),$("#swift-code").val(n.bank_us.swift_code),$("#routing-number").val(n.bank_us.routing_number),$("#account-number").val(n.bank_us.account_number),"Savings"==n.bank_us.account_type?($("#saving").addClass("checked"),$("#checking").removeClass("checked")):($("#saving").removeClass("checked"),$("#checking").addClass("checked")),""!=n.bank_us.swift_code&&null!=n.bank_us.swift_code||$(".banks").show())):($(".non-us-bank").addClass("button-blue").removeClass("button-white"),$(".us-bank").addClass("button-white").removeClass("button-blue"),$(".middle-bank").show(),$(".checking-saving").hide(),$("#routing-number-wrapper").hide(),$("#bank-name").val(n.bank_non_us.bank_name),$("#bank-address").val(n.bank_non_us.bank_address),$("#swift-code").val(n.bank_non_us.swift_code),$("#account-number").val(n.bank_non_us.account_number),n.bank_non_us.have_middle_bank&&($(".middle-bank-info").show(),$("#middle-bank-name").val(n.bank_non_us.middle_bank_name),$("#middle-bank-address").val(n.bank_non_us.middle_bank_address),$("#middle-bank-swift-code").val(n.bank_non_us.middle_bank_swift_code)),""!=n.bank_non_us.swift_code&&null!=n.bank_non_us.swift_code||$(".banks").show()))}function n(a){alert(a.msg)}$('#product_head ul li[data-name="产品"]').addClass("active");var e={},s=getUrlParam("phone")||"",t=getUrlParam("partner_id")||"",o=getUrlParam("product_id")||"",i=getUrlParam("order_number")||"";$(".prev-two").on("click",function(){window.location="/auxiliary_order/stepTwo.html?product_id="+o+"&phone="+s+"&partner_id="+t+"&order_number="+i}),$(".step-three").on("click",function(){function a(a){var n=a.body;n&&(window.location="/auxiliary_order/information_validation.html?product_id="+o+"&phone="+s+"&partner_id="+t+"&order_number="+i)}function n(a){$(".step-three").prop("disabled",!1),alert(a.msg)}$(this).prop("disabled",!0);var d,l=!0;d=$(".non-us-bank").hasClass("button-blue")?"NON_US":"US";var b=$("#bank-name").val(),c=$("#bank-address").val(),r=$("#swift-code").val(),u=$("#routing-number").val()||"",_=$("#account-number").val(),k=$("#middle-bank-name").val()||"",m=$("#middle-bank-address").val()||"",h=$("#middle-bank-swift-code").val()||"",v=0,p="Checking";if(""==b&&($("#bank-name").addClass("red-shadow"),l=!1),""==c&&($("#bank-address").addClass("red-shadow"),l=!1),""==r&&($("#swift-code").addClass("red-shadow"),l=!1),"US"==d?(""==u&&($("#routing-number").addClass("red-shadow"),l=!1),p=$("#saving").hasClass("checked")?"Savings":"Checking"):""!=k&&""!=m&&""!=h&&(v=1),""==_&&($("#account-number").addClass("red-shadow"),l=!1),l)e.channel_code=t,e.product_id=o,e.order_number=i,e.phone=s,e.bank_type=d,"NON_US"==d?(e.bank_non_us={},e.bank_non_us.bank_name=b,e.bank_non_us.bank_address=c,e.bank_non_us.swift_code=r,e.bank_non_us.account_number=_,e.bank_non_us.have_middle_bank=v,v&&(e.bank_non_us.middle_bank_name=k,e.bank_non_us.middle_bank_address=m,e.bank_non_us.middle_bank_swift_code=h)):(e.bank_us={},e.bank_us.bank_name=b,e.bank_us.bank_address=c,e.bank_us.swift_code=r,e.bank_us.routing_number=u,e.bank_us.account_number=_,e.bank_us.account_type=p),postData({url:base_url+"/zion/assist/operateUser",data:JSON.stringify(e),headers:{mx_secret:$.cookie("mx_secret"),mx_token:$.cookie("mx_token")},contentType:"application/json; charset=utf-8",sucFn:a,failFn:n});else{var f=$(".red-shadow").eq(0).offset().top;$("body").scrollTop(f),$(this).prop("disabled",!1)}return!1}),""!=s&&getData({url:base_url+"/zion/assist/customerInfo",data:{phone:s},headers:{mx_secret:$.cookie("mx_secret"),mx_token:$.cookie("mx_token")},sucFn:a,failFn:n}),$(".non-us-bank").on("click",function(){$(".common-bank-detail input").val(""),$(".common-bank-detail textarea").val(""),$(this).addClass("button-blue").removeClass("button-white"),$(".us-bank").addClass("button-white").removeClass("button-blue"),$(".middle-bank").show(),$(".middle-bank-info").show(),$(".checking-saving").hide(),$("#routing-number-wrapper").hide()}),$(".us-bank").on("click",function(){$(".common-bank-detail input").val(""),$(".common-bank-detail textarea").val(""),$(this).addClass("button-blue").removeClass("button-white"),$(".non-us-bank").addClass("button-white").removeClass("button-blue"),$(".middle-bank").hide(),$(".middle-bank-info").hide(),$(".checking-saving").show(),$("#routing-number-wrapper").show()}),$(".button").on("click",function(){$("input").removeClass("red-shadow"),$("textarea").removeClass("red-shadow");var a=$(".non-us-bank").hasClass("button-blue"),n=$(".us-bank").hasClass("button-blue");if(a){var e={type:"1"};$.ajax({type:"get",dataType:"json",contentType:"application/json",data:e,url:base_url+"/white_label/invest/access_bank_dic",success:function(a){d=a.body;var n="";$.each(d,function(a){n+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height:60px;"><img class="bank-icon" style="margin-top: 10px;" src="'+d[a].bank_url+'" alt=""></div> <div style="float: right; width: 70%; height:60px;"><p style="text-align: left;">'+d[a].bank_name_cn+'</p><p style="text-align: left;">'+d[a].bank_name_en+"</p></div></div></div></a>"}),$(".bank-list").empty().append(n)}})}if(n){var e={type:"2"};$.ajax({type:"get",dataType:"json",contentType:"application/json",data:e,url:base_url+"/white_label/invest/access_bank_dic",success:function(a){d=a.body;var n="";$.each(d,function(a){n+='<a><div class="col-md-4"><div class="form-line choose-bank"><div style="float: left; width: 30%; height: 50px;"><img class="bank-icon" style="margin-top: 5px;" src="'+d[a].bank_url+'" alt=""></div> <div style="float: right; width: 70%; margin-top: 7px;"><p style="text-align: left;">'+d[a].bank_name_cn+'</p><p style="text-align: left;">'+d[a].bank_name_en+"</p></div></div></div></a>"}),$(".bank-list").empty().append(n)}})}}),$("body").on("click",".choose-bank",function(){var a=$(this).closest("a").prev("a").index();$("#Modal").modal("hide"),$(".us-bank").hasClass("button-blue")?($("#Modal").modal("hide"),$("#bank-name").val(d[a+1].bank_name_en),$("#bank-address").val(d[a+1].bank_address),$("#swift-code").val(d[a+1].bank_swift_code),$("#routing-number").val(d[a+1].routing_number),$("#account-number").val(""),$("#middle-bank-name").val(d[a+1].middle_bank_name),$("#middle-bank-address").val(d[a+1].middle_bank_address),$("#middle-bank-swift-code").val(d[a+1].middle_bank_swift_code)):($("#Modal").modal("hide"),$("#bank-name").val(d[a+1].bank_name_en),$("#bank-address").val(d[a+1].bank_address),$("#swift-code").val(d[a+1].bank_swift_code),$("#account-number").val(""),$("#middle-bank-name").val(d[a+1].middle_bank_name),$("#middle-bank-address").val(d[a+1].middle_bank_address),$("#middle-bank-swift-code").val(d[a+1].middle_bank_swift_code))}),$("#checking").on("click",function(){$(this).addClass("checked"),$("#saving").removeClass("checked")}),$("#saving").on("click",function(){$(this).addClass("checked"),$("#checking").removeClass("checked")}),$("#Modal").modal({show:!1,backdrop:"/channel-static"})});