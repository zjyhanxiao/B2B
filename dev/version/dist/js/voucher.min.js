$(function(){function e(e){}function n(e){a.indexOf("+")==-1&&(a="+86 "+a),""!=i?window.location="/white_label/signature.html?product_id="+r+"&partner_id="+t+"&phone="+a+"&access_token="+e.body.token+"&order_number="+i:window.location="/white_label/base_info.html?product_id="+r+"&partner_id="+t+"&phone="+a+"&access_token="+e.body.token}function o(e){alert(e.msg)}var r=getUrlParam("product_id")||"",t=getUrlParam("partner_id")||"",a=getUrlParam("phone")||"",i=getUrlParam("order_number")||"";$("#get_code").on("click",function(){$(this).prop("disabled",!0),a=$("#phone").val();var n=$(this);if(/^1\d{10}$/.test(a)){var r=null,i=60;r=setInterval(function(){$("#get_code").html(i+"秒后重新发送"),i--,0==i&&(clearInterval(r),n.prop("disabled",!1),n.html("重新获取验证码"),i=60)},1e3),a.indexOf("+")==-1&&(a="+86 "+a),getData({url:base_url+"/zion/common/verify_code",data:{phone:a,channel_code:t},async:!1,sucFn:e,failFn:o})}else $("#error").html("请输入您的手机号码"),$(this).prop("disabled",!1);return!1}),$("#submit").on("click",function(){$(this).prop("disabled",!0),a=$("#phone").val();var e=$("#verify_code").val();return/^1\d{10}$/.test(a)?""==e?($("#error").html("请输入您的校验码"),$(this).prop("disabled",!1),!1):(a.indexOf("+")==-1&&(a="+86 "+a),void getData({url:base_url+"/zion/common/voucher",data:{phone:a,channel_code:t,verify_code:e},async:!1,sucFn:n,failFn:o})):($("#error").html("请输入您的手机号码"),$(this).prop("disabled",!1),!1)}),$("input").on("focus",function(){$("#error").empty()})});