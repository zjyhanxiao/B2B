$(function(){function e(e){return"FOR_INVEST"!==e.body.status?(window.location="/auxiliary_order/errLink.html",!1):void $("#product-name").html(e.body.name)}function o(e){alert(e.msg)}function r(e){console.log("获取验证码成功")}function t(e){d.indexOf("+")==-1&&(d="+86 "+d),""!=l?window.location="/white_label/signature.html?product_id="+a+"&partner_id="+i+"&phone="+d+"&access_token="+e.body.token+"&order_number="+l:window.location="/invest.html?product_id="+a+"&partner_id="+i+"&phone="+d+"&access_token="+e.body.token}function n(e){$("#error").html(e.msg),$("#submit, #get_code").prop("disabled",!1)}var a=getUrlParam("product_id")||"",i=getUrlParam("partner_id")||"",d=getUrlParam("phone")||"",l=getUrlParam("order_number")||"";""!=a&&getData({url:base_url+"/white_label/product_info",data:{product_id:a},sucFn:e,failFn:o}),$("#get_code").on("click",function(){$(this).prop("disabled",!0),d=$("#phone").val();var e=$(this);if(!/^1\d{10}$/.test(d))return $("#error").html("请输入您的手机号码"),$(this).prop("disabled",!1),!1;var o=null,t=60;return o=setInterval(function(){$("#get_code").html(t+"秒后重新发送"),t--,0==t&&(clearInterval(o),e.prop("disabled",!1),e.html("重新获取验证码"),t=60)},1e3),d.indexOf("+")==-1&&(d="+86 "+d),getData({url:base_url+"/zion/common/verify_code",data:{phone:d,channel_code:i},async:!1,sucFn:r,failFn:n}),!1}),$("#submit").on("click",function(){$(this).prop("disabled",!0),d=$("#phone").val();var e=$("#verify_code").val();return/^1\d{10}$/.test(d)?""==e?($("#error").html("请输入您的校验码"),$(this).prop("disabled",!1),!1):(d.indexOf("+")==-1&&(d="+86 "+d),void getData({url:base_url+"/zion/common/voucher",data:{phone:d,channel_code:i,verify_code:e},async:!1,sucFn:t,failFn:n})):($("#error").html("请输入您的手机号码"),$(this).prop("disabled",!1),!1)}),$("input").on("focus",function(){$("#error").empty()})});